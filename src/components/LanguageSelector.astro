---
---

<div class="language-selector" id="languageSelector">
    <!-- Aquí puedes insertar tu SVG de la bandera -->
    <div class="flag-icon" id="currentFlag">
        <!-- SVG de español por defecto -->
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
            <mask id="IconifyId194d38591e738ff093">
                <circle cx="256" cy="256" r="256" fill="#fff"></circle>
            </mask><g mask="url(#IconifyId194d38591e738ff093)">
                <path
                    fill="#ffda44"
                    d="m0 128l256-32l256 32v256l-256 32L0 384Z"
                >
                </path><path
                    fill="#d80027"
                    d="M0 0h512v128H0zm0 384h512v128H0z"
                >
                </path><g fill="#eee">
                    <path d="M144 304h-16v-80h16zm128 0h16v-80h-16z">
                    </path><ellipse cx="208" cy="296" rx="48" ry="32"></ellipse>
                </g><g fill="#d80027">
                    <rect width="16" height="24" x="128" y="192" rx="8">
                    </rect><rect width="16" height="24" x="272" y="192" rx="8">
                    </rect><path
                        d="M208 272v24a24 24 0 0 0 24 24a24 24 0 0 0 24-24v-24h-24z"
                    >
                    </path>
                </g><rect
                    width="32"
                    height="16"
                    x="120"
                    y="208"
                    fill="#ff9811"
                    ry="8"
                >
                </rect><rect
                    width="32"
                    height="16"
                    x="264"
                    y="208"
                    fill="#ff9811"
                    ry="8"
                >
                </rect><rect
                    width="32"
                    height="16"
                    x="120"
                    y="304"
                    fill="#ff9811"
                    rx="8"
                >
                </rect><rect
                    width="32"
                    height="16"
                    x="264"
                    y="304"
                    fill="#ff9811"
                    rx="8"
                >
                </rect><path
                    fill="#ff9811"
                    d="M160 272v24c0 8 4 14 9 19l5-6l5 10a21 21 0 0 0 10 0l5-10l5 6c6-5 9-11 9-19v-24h-9l-5 8l-5-8h-10l-5 8l-5-8z"
                >
                </path><path
                    fill="#d80027"
                    d="M122 248a4 4 0 0 0-4 4a4 4 0 0 0 4 4h172a4 4 0 0 0 4-4a4 4 0 0 0-4-4zm0 24a4 4 0 0 0-4 4a4 4 0 0 0 4 4h28a4 4 0 0 0 4-4a4 4 0 0 0-4-4zm144 0a4 4 0 0 0-4 4a4 4 0 0 0 4 4h28a4 4 0 0 0 4-4a4 4 0 0 0-4-4z"
                >
                </path><path
                    fill="#eee"
                    d="M196 168c-7 0-13 5-15 11l-5-1c-9 0-16 7-16 16s7 16 16 16c7 0 13-4 15-11a16 16 0 0 0 17-4a16 16 0 0 0 17 4a16 16 0 1 0 10-20a16 16 0 0 0-27-5q-4.5-6-12-6m0 8c5 0 8 4 8 8c0 5-3 8-8 8c-4 0-8-3-8-8c0-4 4-8 8-8m24 0c5 0 8 4 8 8c0 5-3 8-8 8c-4 0-8-3-8-8c0-4 4-8 8-8m-44 10l4 1l4 8c0 4-4 7-8 7s-8-3-8-8c0-4 4-8 8-8m64 0c5 0 8 4 8 8c0 5-3 8-8 8c-4 0-8-3-8-7l4-8z"
                >
                </path><path
                    fill="none"
                    d="M220 284v12c0 7 5 12 12 12s12-5 12-12v-12z"
                >
                </path><path fill="#ff9811" d="M200 160h16v32h-16z"></path><path
                    fill="#eee"
                    d="M208 224h48v48h-48z"
                >
                </path><path
                    fill="#d80027"
                    d="m248 208l-8 8h-64l-8-8c0-13 18-24 40-24s40 11 40 24m-88 16h48v48h-48z"
                >
                </path><rect
                    width="20"
                    height="32"
                    x="222"
                    y="232"
                    fill="#d80027"
                    rx="10"
                    ry="10"
                >
                </rect><path
                    fill="#ff9811"
                    d="M168 232v8h8v16h-8v8h32v-8h-8v-16h8v-8zm8-16h64v8h-64z"
                >
                </path><g fill="#ffda44">
                    <circle cx="186" cy="202" r="6"></circle><circle
                        cx="208"
                        cy="202"
                        r="6"
                    >
                    </circle><circle cx="230" cy="202" r="6"></circle>
                </g><path
                    fill="#d80027"
                    d="M169 272v43a24 24 0 0 0 10 4v-47zm20 0v47a24 24 0 0 0 10-4v-43z"
                >
                </path><g fill="#338af3">
                    <circle cx="208" cy="272" r="16"></circle><rect
                        width="32"
                        height="16"
                        x="264"
                        y="320"
                        ry="8"
                    >
                    </rect><rect width="32" height="8" x="120" y="320" ry="8">
                    </rect>
                </g>
            </g>
        </svg>
    </div>
    <span id="currentLanguage" class="text">ES</span>

    <!-- Aquí puedes insertar tu SVG de la flecha -->
    <div class="arrow-down" id="arrowDown">
        <!-- SVG de flecha hacia abajo -->
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="m7 10l5 5m0 0l5-5"/></svg>
    </div>

    <!-- Opciones de idioma -->
    <div class="language-options" id="languageOptions">
        <div class="language-option" data-lang="es">
            <!-- SVG de España -->
            <div class="flag-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                    <mask id="IconifyId194d38591e738ff093">
                        <circle cx="256" cy="256" r="256" fill="#fff"></circle>
                    </mask><g mask="url(#IconifyId194d38591e738ff093)">
                        <path
                            fill="#ffda44"
                            d="m0 128l256-32l256 32v256l-256 32L0 384Z"
                        >
                        </path><path
                            fill="#d80027"
                            d="M0 0h512v128H0zm0 384h512v128H0z"
                        >
                        </path><g fill="#eee">
                            <path d="M144 304h-16v-80h16zm128 0h16v-80h-16z">
                            </path><ellipse cx="208" cy="296" rx="48" ry="32">
                            </ellipse>
                        </g><g fill="#d80027">
                            <rect width="16" height="24" x="128" y="192" rx="8">
                            </rect><rect
                                width="16"
                                height="24"
                                x="272"
                                y="192"
                                rx="8"
                            >
                            </rect><path
                                d="M208 272v24a24 24 0 0 0 24 24a24 24 0 0 0 24-24v-24h-24z"
                            >
                            </path>
                        </g><rect
                            width="32"
                            height="16"
                            x="120"
                            y="208"
                            fill="#ff9811"
                            ry="8"
                        >
                        </rect><rect
                            width="32"
                            height="16"
                            x="264"
                            y="208"
                            fill="#ff9811"
                            ry="8"
                        >
                        </rect><rect
                            width="32"
                            height="16"
                            x="120"
                            y="304"
                            fill="#ff9811"
                            rx="8"
                        >
                        </rect><rect
                            width="32"
                            height="16"
                            x="264"
                            y="304"
                            fill="#ff9811"
                            rx="8"
                        >
                        </rect><path
                            fill="#ff9811"
                            d="M160 272v24c0 8 4 14 9 19l5-6l5 10a21 21 0 0 0 10 0l5-10l5 6c6-5 9-11 9-19v-24h-9l-5 8l-5-8h-10l-5 8l-5-8z"
                        >
                        </path><path
                            fill="#d80027"
                            d="M122 248a4 4 0 0 0-4 4a4 4 0 0 0 4 4h172a4 4 0 0 0 4-4a4 4 0 0 0-4-4zm0 24a4 4 0 0 0-4 4a4 4 0 0 0 4 4h28a4 4 0 0 0 4-4a4 4 0 0 0-4-4zm144 0a4 4 0 0 0-4 4a4 4 0 0 0 4 4h28a4 4 0 0 0 4-4a4 4 0 0 0-4-4z"
                        >
                        </path><path
                            fill="#eee"
                            d="M196 168c-7 0-13 5-15 11l-5-1c-9 0-16 7-16 16s7 16 16 16c7 0 13-4 15-11a16 16 0 0 0 17-4a16 16 0 0 0 17 4a16 16 0 1 0 10-20a16 16 0 0 0-27-5q-4.5-6-12-6m0 8c5 0 8 4 8 8c0 5-3 8-8 8c-4 0-8-3-8-8c0-4 4-8 8-8m24 0c5 0 8 4 8 8c0 5-3 8-8 8c-4 0-8-3-8-8c0-4 4-8 8-8m-44 10l4 1l4 8c0 4-4 7-8 7s-8-3-8-8c0-4 4-8 8-8m64 0c5 0 8 4 8 8c0 5-3 8-8 8c-4 0-8-3-8-7l4-8z"
                        >
                        </path><path
                            fill="none"
                            d="M220 284v12c0 7 5 12 12 12s12-5 12-12v-12z"
                        >
                        </path><path fill="#ff9811" d="M200 160h16v32h-16z">
                        </path><path fill="#eee" d="M208 224h48v48h-48z">
                        </path><path
                            fill="#d80027"
                            d="m248 208l-8 8h-64l-8-8c0-13 18-24 40-24s40 11 40 24m-88 16h48v48h-48z"
                        >
                        </path><rect
                            width="20"
                            height="32"
                            x="222"
                            y="232"
                            fill="#d80027"
                            rx="10"
                            ry="10"
                        >
                        </rect><path
                            fill="#ff9811"
                            d="M168 232v8h8v16h-8v8h32v-8h-8v-16h8v-8zm8-16h64v8h-64z"
                        >
                        </path><g fill="#ffda44">
                            <circle cx="186" cy="202" r="6"></circle><circle
                                cx="208"
                                cy="202"
                                r="6"
                            >
                            </circle><circle cx="230" cy="202" r="6"></circle>
                        </g><path
                            fill="#d80027"
                            d="M169 272v43a24 24 0 0 0 10 4v-47zm20 0v47a24 24 0 0 0 10-4v-43z"
                        >
                        </path><g fill="#338af3">
                            <circle cx="208" cy="272" r="16"></circle><rect
                                width="32"
                                height="16"
                                x="264"
                                y="320"
                                ry="8"
                            >
                            </rect><rect
                                width="32"
                                height="8"
                                x="120"
                                y="320"
                                ry="8"
                            >
                            </rect>
                        </g>
                    </g>
                </svg>
            </div>
            <span class="text">ES</span>
        </div>
        <div class="language-option" data-lang="en">
            <!-- SVG de Estados Unidos -->
            <div class="flag-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                    <mask id="IconifyId194d38591e738ff091">
                        <circle cx="256" cy="256" r="256" fill="#fff"></circle>
                    </mask><g mask="url(#IconifyId194d38591e738ff091)">
                        <path
                            fill="#eee"
                            d="M256 0h256v64l-32 32l32 32v64l-32 32l32 32v64l-32 32l32 32v64l-256 32L0 448v-64l32-32l-32-32v-64z"
                        >
                        </path><path
                            fill="#d80027"
                            d="M224 64h288v64H224Zm0 128h288v64H256ZM0 320h512v64H0Zm0 128h512v64H0Z"
                        >
                        </path><path fill="#0052b4" d="M0 0h256v256H0Z">
                        </path><path
                            fill="#eee"
                            d="m187 243l57-41h-70l57 41l-22-67zm-81 0l57-41H93l57 41l-22-67zm-81 0l57-41H12l57 41l-22-67zm162-81l57-41h-70l57 41l-22-67zm-81 0l57-41H93l57 41l-22-67zm-81 0l57-41H12l57 41l-22-67Zm162-82l57-41h-70l57 41l-22-67Zm-81 0l57-41H93l57 41l-22-67zm-81 0l57-41H12l57 41l-22-67Z"
                        >
                        </path>
                    </g>
                </svg>
            </div>
            <span class="text">EN</span>
        </div>
    </div>
</div>

<style>
    /* Contenedor del selector */
    .language-selector {
        display: flex;
        align-items: center;
        padding: 8px 12px;
        background-color: var(--color-bg);
        cursor: pointer;
        font-size: 14px;
        position: relative;
    }

    /* Iconos de banderas */
    .flag-icon {
        width: 20px;
        height: 20px;
        margin-right: 8px;
    }

    /* Flecha hacia abajo */
    .arrow-down {
        margin-left: auto;
        width: 16px; /* Ajusta según tu SVG */
        height: 16px; /* Ajusta según tu SVG */
        stroke: var(--black);
    }

    /* Menú desplegable */
    .language-options {
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        margin-top: 8px;
        background-color: var(--color-bg);
        box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.5);
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        display: none;
        z-index: 10;
    }

    .language-options.active {
        display: block;
    }

    .language-option {
        display: flex;
        align-items: center;
        padding: 8px 12px;
        cursor: pointer;
    }

    .language-option:hover {
        background-color: var(--white);
    }
    .text {
        color: var(--black);
    }
</style>

<script>
    // Selección de elementos
    const languageSelector = document.getElementById("languageSelector")
    const languageOptions = document.getElementById("languageOptions")
    const currentFlag = document.getElementById("currentFlag")
    const currentLanguage = document.getElementById("currentLanguage")

    // 1. Actualizar bandera al cargar/recargar la página
    const detectAndSetCurrentLanguage = () => {
        const currentPath = window.location.pathname
        const currentLang = currentPath.startsWith("/en/") ? "en" : "es"

        // Buscar la opción correspondiente al idioma actual
        const activeOption = document.querySelector(
            `.language-option[data-lang="${currentLang}"]`,
        )

        if (activeOption) {
            // Clonar el SVG de la opción seleccionada
            const flagClone = activeOption
                .querySelector(".flag-icon")
                .cloneNode(true)

            // Actualizar UI
            currentFlag.innerHTML = ""
            currentFlag.appendChild(flagClone)
            currentLanguage.textContent = currentLang.toUpperCase()
        }
    }

    // 2. Configurar estado inicial
    detectAndSetCurrentLanguage()

    // 3. Manejar clic en el selector
    languageSelector.addEventListener("click", (e) => {
        e.stopPropagation()
        languageOptions.classList.toggle("active")
    })

    // 4. Manejar selección de idioma
    document.querySelectorAll(".language-option").forEach((option) => {
        option.addEventListener("click", (e) => {
            e.preventDefault()
            const selectedLang = option.dataset.lang

            // Construir nueva URL
            const pathSegments = window.location.pathname
                .split("/")
                .filter((p) => p)
            const newPath =
                pathSegments.length > 1
                    ? `/${selectedLang}/${pathSegments.slice(1).join("/")}`
                    : `/${selectedLang}/`

            // Redirección
            window.location.href = newPath
        })
    })

    // 5. Cerrar menú al hacer clic fuera
    document.addEventListener("click", (e) => {
        if (!languageSelector.contains(e.target)) {
            languageOptions.classList.remove("active")
        }
    })

    // 6. Actualizar al navegar con el historial
    window.addEventListener("popstate", detectAndSetCurrentLanguage)
</script>
